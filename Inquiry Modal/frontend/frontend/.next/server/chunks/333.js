exports.id=333,exports.ids=[333],exports.modules={3016:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(687),n=r(3210),l=r(2688);let i=(0,l.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),s=(0,l.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var o=r(7952);let d=["Loose","In Jewellery","Certified","Natural"],c=["Pending","Hold","Not Available","On Memo","Confirmed - TOH","Hold - TOH","Release","Added to Stock","In Exhibition","Dispatched"],b=["RCVD","Pending","APRVd","HALF RCVD","Transfer SS Sent","Null"],h=["OK","BLUE TINGE","OTHER TINGE","CULET BROKEN","OTHER ISSUE","NO BGM","Null"],u=["Stone - OH","Cert - OH","Pending","S & C BOTH - ON","Mumbai Hold - Ready to Dispatch","Tomorrow","On the Way","HK Office","Null"],x=["Available","Not Available","Released","Sent to Vndr.","Fr Other","Released, Sta","Own HK","Own India","Surat","Mumbai","Null"],p=["Surat","Mumbai","Hongkong","USA","Other","Null"];function g({options:e,value:t,onChange:r,open:n,setOpen:l,id:i,colKey:s}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{style:{cursor:"pointer",display:"inline-block"},onClick:()=>l(n===`${s}-${i}`?null:`${s}-${i}`),children:(0,a.jsx)(o.A,{status:t})}),n===`${s}-${i}`&&(0,a.jsx)("div",{className:"absolute z-10 bg-gray-50 border border-gray-300 shadow-md mt-2 left-1/2 -translate-x-1/2 min-w-[160px] text-left",style:{minWidth:160},children:e.map(e=>(0,a.jsx)("div",{className:"p-2 pl-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>{r(e),l(null)},children:(0,a.jsx)(o.A,{status:e})},e))})]})}var y=r(2164);function m({data:e,columns:t,onDelete:r,onEdit:l,onCheckboxChange:m,onSelectAll:k,defaultAvailability:w="PENDING",rowCheckbox:f=!1,selectedRows:v=[],onRowCheckbox:j,onSelectAllRows:N,role:S,showInvoiceColumn:C=!1,pageType:O="sales",showBillColumn:A=!1}){let{role:I}=function(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!0);return{role:e,loading:r}}(),[R,_]=(0,n.useState)(null),[$,H]=(0,n.useState)(null),[E,T]=(0,n.useState)({}),[q,F]=(0,n.useState)([]),[M,D]=(0,n.useState)({}),L={admin:t.map(e=>e.key),sales:t.map(e=>e.key).filter(e=>["inquiry_id","inq_date","today_date","period","sales","buyer","stockId","shape","ct","color","clarity","cut","po","sym","lab","report","disPpc","ppc","amt","type","availability","payment","remark"].includes(e)),backend:["location","otRemark","time","statusOfStone","qcRemark","stoneConfirmationRemark","entryStatus","locationRemark"],account:[]},V=I&&L[I]?L[I]:[],P=t=>{let r=e.find(e=>e.id===t);r?.sale_team_status!=="Dispatched"&&(H(t),T(r?{...r}:{}))},K=()=>{l&&$&&l($,{...E,id:$}),H(null),T({})},U=()=>{H(null),T({})},B=e=>["type","availability","payment","qcRemark","statusOfStone","otRemark","location"].includes(e),W=e=>"sales"===I&&["type","availability","payment"].includes(e)||"backend"===I&&["qcRemark","statusOfStone","otRemark","location"].includes(e)||"admin"===I&&B(e),z=e=>{switch(e){case"type":return d;case"availability":return c;case"payment":return b;case"qcRemark":return h;case"statusOfStone":return u;case"otRemark":return x;case"location":return p;default:return[]}};e.length>0&&e.every(e=>v.includes(e.id));let G=({color:e="#325c85"})=>(0,a.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"none",stroke:e,strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 12h8M8 12l4-4m-4 4l4 4",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,a.jsx)("polyline",{points:"16 3 21 3 21 8",stroke:e,strokeWidth:"2",fill:"none"})]});return(0,a.jsx)("div",{className:"overflow-x-auto bg-white shadow h-[calc(80vh-180px)] max-h-screen",children:(0,a.jsxs)("table",{className:"min-w-[1800px] w-full text-xs border border-gray-300",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-100 bg-gray-200 border-b border-gray-300",children:(0,a.jsxs)("tr",{className:"text-gray-700",children:[f&&(0,a.jsx)("th",{className:"py-2 px-3 font-semibold border border-gray-300 text-center whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:e.length>0&&e.every(e=>v.includes(e.id)),onChange:e=>N&&N(e.target.checked)})}),C&&["admin","sales","account"].includes(S)&&(0,a.jsx)("th",{className:"py-3 px-3 border border-gray-300 text-center align-middle",children:"Invoice"}),(0,a.jsx)("th",{className:"py-2 px-3 font-semibold border border-gray-300 text-center whitespace-nowrap",children:"Inquiry ID"}),t.map(e=>(0,a.jsx)("th",{className:"py-2 px-3 font-semibold border border-gray-300 text-center whitespace-nowrap",children:e.label},e.key)),r&&(0,a.jsx)("th",{className:"py-2 px-3 font-semibold border border-gray-300",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length+(r?2:1)+ +!!f,className:"text-center py-4 text-gray-400 border border-gray-200 whitespace-nowrap",children:"No inquiries found."})}),e.map(e=>{let n=$===e.id;return(0,a.jsxs)("tr",{children:[f&&(0,a.jsx)("td",{className:"py-3 px-3 border border-gray-200 text-center align-middle whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:v.includes(e.id),onChange:t=>j&&j(e.id,t.target.checked)})}),C&&["admin","sales","account"].includes(S)&&(0,a.jsx)("td",{className:"py-3 px-3 border border-gray-200 text-center align-middle whitespace-nowrap",children:["admin","sales"].includes(S)?(0,a.jsxs)("form",{onSubmit:async t=>{t.preventDefault();let r=t.currentTarget.elements.namedItem("invoiceFile");if(!r.files?.[0])return;let a=r.files[0],n=new FormData;n.append("invoice",a),n.append("inquiry_id",e.inquiry_id),await fetch(`${y.A}/inquiries/upload-invoice`,{method:"POST",body:n}),alert("Invoice uploaded!"),window.location.reload()},children:[(0,a.jsx)("input",{type:"file",name:"invoiceFile",accept:".pdf,.jpg,.png",style:{display:"none"},id:`invoice-file-${e.id}`,onChange:e=>e.currentTarget.form?.requestSubmit()}),(0,a.jsx)("label",{htmlFor:`invoice-file-${e.id}`,style:{cursor:"pointer"},children:(0,a.jsx)(G,{})}),e.invoice_file?(0,a.jsx)("a",{href:`${y.A}/uploaded_invoices/${e.invoice_file}`,target:"_blank",rel:"noopener noreferrer",className:"block mt-1 text-blue-500 text-xs underline",children:"View Invoice"}):(0,a.jsx)("span",{className:"block mt-1 text-gray-400 text-xs",children:"No file"})]}):e.invoice_file?(0,a.jsx)("a",{href:`${y.A}/uploaded_invoices/${e.invoice_file}`,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 text-xs underline",children:"View Invoice"}):(0,a.jsx)("span",{className:"block text-gray-400 text-xs",children:"No file"})}),(0,a.jsx)("td",{className:"py-3 px-3 border border-gray-200 text-center align-middle whitespace-nowrap",children:"backend"===O?e.inquiry_id:e.id}),t.map(t=>{let r=V.includes(t.key)&&"dispatch"!==e.sale_team_status,l=B(t.key),i=W(t.key),s=z(t.key),d=e[t.key]??"";return(0,a.jsx)("td",{className:"py-3 px-3 border border-gray-200 text-center align-middle whitespace-nowrap",style:{position:"relative",minHeight:64},children:i&&"Dispatched"!==e.sale_team_status?(0,a.jsx)(g,{options:s,value:d,onChange:r=>m&&m(e.id,t.key,r),open:R,setOpen:_,id:e.id,colKey:t.key}):n&&r?"FALSE"===t.label?(0,a.jsx)("input",{type:"checkbox",checked:!!E[t.key],onChange:e=>T(r=>({...r,[t.key]:e.target.checked})),className:"accent-blue-500"}):l?(0,a.jsx)(g,{options:s,value:E[t.key]||"",onChange:e=>T(r=>({...r,[t.key]:e})),open:R,setOpen:_,id:e.id,colKey:t.key}):(0,a.jsx)("input",{type:"text",value:E[t.key]||"",onChange:e=>T(r=>({...r,[t.key]:e.target.value})),className:"border px-2 py-1 rounded w-full"}):"FALSE"===t.label?(0,a.jsx)("input",{type:"checkbox",checked:!!e[t.key],onChange:r=>m&&m(e.id,t.key,r.target.checked),className:"accent-blue-500"}):l?(0,a.jsx)(o.A,{status:d||"None"}):d},t.key)}),r&&(0,a.jsx)("td",{className:"py-3 px-3 border border-gray-200 text-center whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex justify-center gap-2",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"text-green-600 font-semibold px-2",onClick:K,children:"Save"}),(0,a.jsx)("button",{className:"text-gray-500 font-semibold px-2",onClick:U,children:"Cancel"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"text-blue-500",onClick:()=>P(e.id),children:(0,a.jsx)(i,{className:"w-5 h-5"})}),(0,a.jsx)("button",{className:"text-red-500",onClick:()=>r&&r(e.id),children:(0,a.jsx)(s,{className:"w-5 h-5"})})]})})})]},e.id)})]})]})})}},3117:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});class a extends Error{}function n(e,t){let r;if("string"!=typeof e)throw new a("Invalid token specified: must be a string");t||(t={});let n=+(!0!==t.header),l=e.split(".")[n];if("string"!=typeof l)throw new a(`Invalid token specified: missing part #${n+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(l)}catch(e){throw new a(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new a(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}a.prototype.name="InvalidTokenError"},6966:(e,t,r)=>{"use strict";function a(){return null}r.d(t,{u:()=>a}),r(3117)},7729:()=>{},7952:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(687);r(3210);let n={pending:"bg-yellow-100 text-yellow-800 border border-yellow-300",hold:"bg-green-700 text-white","not available":"bg-red-100 text-red-700 border border-red-300","on memo":"bg-blue-100 text-blue-700 border border-blue-300","confirmed - toh":"bg-purple-700 text-white","hold - toh":"bg-orange-100 text-orange-700 border border-orange-300",release:"bg-red-700 text-white","added to stock":"bg-red-800 text-white","in exhibition":"bg-blue-100 text-blue-700 border border-blue-300",available:"bg-green-100 text-green-700 border border-green-300",released:"bg-red-700 text-white","sent to vendor":"bg-blue-800 text-white","from other":"bg-cyan-300 text-black","released, staging":"bg-red-800 text-white","own hk":"bg-green-800 text-white","own india":"bg-blue-700 text-white",surat:"bg-slate-700 text-white",mumbai:"bg-amber-800 text-white",loose:"bg-blue-700 text-white","in jewellery":"bg-purple-700 text-white",certified:"bg-pink-200 text-black",natural:"bg-green-700 text-white",rcvd:"bg-green-700 text-white","pending payment":"bg-red-700 text-white",aprvd:"bg-blue-900 text-white","half rcvd":"bg-yellow-200 text-yellow-900","transfer ss sent":"bg-green-100 text-green-800 border border-green-300",dispatched:"bg-blue-600 text-white",null:"bg-gray-100 text-gray-400 border border-gray-200",none:"bg-gray-100 text-gray-400 border border-gray-200",ok:"bg-green-600 text-white","blue tinge":"bg-blue-700 text-white","other tinge":"bg-purple-300 text-purple-900","culet broken":"bg-yellow-900 text-yellow-100","other issue":"bg-red-700 text-white","no bgm":"bg-yellow-200 text-yellow-900","stone - oh":"bg-blue-200 text-blue-900","cert - oh":"bg-purple-400 text-white","s & c both - on":"bg-blue-100 text-blue-900","mumbai hold - ready to dispatch":"bg-yellow-300 text-yellow-900",tommorow:"bg-lime-400 text-black","on the way":"bg-purple-200 text-purple-900","hk office":"bg-green-200 text-green-900","sent to vndr.":"bg-blue-700 text-white","fr other":"bg-cyan-400 text-black","released, sta":"bg-red-800 text-white",hongkong:"bg-blue-200 text-blue-900",usa:"bg-blue-100 text-blue-900",other:"bg-red-700 text-white"};function l({status:e,className:t=""}){let r=n[(e??"").trim().toLowerCase()]||"bg-gray-200 text-gray-700 border border-gray-300";return(0,a.jsx)("span",{className:`inline-block rounded px-2 py-0.5 text-xs font-semibold whitespace-nowrap ${r} ${t}`,children:e||"None"})}}};