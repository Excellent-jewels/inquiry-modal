(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{3963:(e,t,a)=>{Promise.resolve().then(a.bind(a,9270))},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6572:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r="https://excellentorders.in"},9270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(5155),l=a(2115),s=a(5695);let i=l.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?l.createElement("title",{id:r},a):null,l.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});var n=a(6572);let o={inquiryId:"",inqDate:"",todayDate:new Date().toISOString().slice(0,10),Period:"",sales:"",buyer:"",stockId:"",shape:"",ct:"",color:"",clarity:"",cut:"",po:"",sym:"",lab:"",report:"",disPpc:"",ppc:"",amt:"",type:"",availability:"Pending",remark:""};function d(){let[e,t]=(0,l.useState)(o),[a,d]=(0,l.useState)([{...o}]),[c,u]=(0,l.useState)(""),m=(0,s.useRouter)(),p=["stockId","shape","ct","color","clarity","cut","po","sym","report","lab","disPpc","ppc","amt"],y=()=>"".concat(Date.now(),"-").concat(Math.floor(1e4*Math.random())),h=a=>{t({...e,[a.target.name]:a.target.value})},x=async()=>{let t=localStorage.getItem("token"),r=localStorage.getItem("userId");if(!t||!r){alert("You are not logged in. Please login again."),m.push("/");return}try{for(let l of a){let a={inquiry_id:l.inquiryId||c,inquiry_date:e.inqDate||new Date().toISOString().slice(0,10),today_date:e.todayDate||new Date().toISOString().slice(0,10),period:e.Period,sales:e.sales,buyer:e.buyer,stock_id:l.stockId,shape:l.shape,ct:l.ct,color:l.color,clarity:l.clarity,cut:l.cut,po:l.po,sym:l.sym,lab:l.lab,report:l.report,dis_ppc:l.disPpc,ppc:l.ppc,amt:l.amt,type:e.type,sale_team_status:e.availability,payment:"",remark_request:e.remark,location:"",backend_status:"",time:"00:00:00",status_of_stone:"",qc_remark:"",stone_confirmation_remark:"",entry_status:"",location_remark:"",created_by:parseInt(r),created_at:new Date().toISOString(),invoice_file:""},s=await fetch("".concat(n.A,"/inquiries/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)});if(!s.ok){let e=await s.text();throw Error(e)}}alert("Inquiry saved successfully!"),m.push("/dashboard/inquiries")}catch(e){console.error("Error saving inquiry:",e),alert("Failed to save inquiry: "+((null==e?void 0:e.message)||"Check console"))}},b=(e,t,r)=>{let l=e.clipboardData.getData("text").split(/\r?\n/).filter(e=>""!==e.trim());if(0===l.length)return;let s=p.indexOf(r),i=[...a];l.forEach((e,a)=>{let r=e.split(/\t|,/),l=t+a;i[l]||(i[l]={...o,inquiryId:y()}),i[l].inquiryId||(i[l].inquiryId=y());for(let e=0;e<r.length;e++){let t=s+e;if(t<p.length){let a=p[t];i[l][a]=r[e]}}}),d(i),e.preventDefault()};return(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){alert("You are not logged in. Please login again."),m.push("/");return}try{let t=await fetch("".concat(n.A,"/inquiries/new-id"),{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();u(a.inquiry_id)}catch(e){console.error("Failed to fetch inquiry ID",e)}})()},[]),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 max-w-full overflow-x-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Inquiry ID"}),(0,r.jsx)("input",{type:"text",value:c||"",readOnly:!0,className:"w-full border border-gray-300 bg-gray-100 rounded px-3 py-2 text-sm"})]}),Object.keys(o).filter(e=>!p.includes(e)&&"type"!==e&&"availability"!==e&&"remark"!==e&&"inquiryId"!==e).map(t=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 capitalize",children:t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")}),(0,r.jsx)("input",{type:"inqDate"===t||"todayDate"===t?"date":"text",name:t,value:e[t]||"",onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",readOnly:"todayDate"===t})]},t)),(0,r.jsxs)("div",{className:"md:col-span-4 flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type"}),(0,r.jsx)("input",{type:"text",name:"type",value:e.type,onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Sale Team Status"}),(0,r.jsx)("input",{type:"text",name:"availability",value:e.availability,onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Remark / Request"}),(0,r.jsx)("input",{type:"text",name:"remark",value:e.remark,onChange:h,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Enter remark or request"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,r.jsx)("button",{type:"button",onClick:()=>{d([...a,{...o,inquiryId:y()}])},className:"flex items-center gap-1 px-3 py-1 bg-gray-700 hover:bg-gray-900 text-white rounded",children:(0,r.jsx)(i,{className:"h-5 w-5"})})}),(0,r.jsx)("div",{className:"overflow-x-auto mt-2",children:(0,r.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:p.map(e=>(0,r.jsx)("th",{className:"px-3 py-2 border-b border-gray-300 text-sm font-semibold capitalize",children:e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},e))})}),(0,r.jsx)("tbody",{children:a.map((e,t)=>(0,r.jsx)("tr",{children:p.map(l=>(0,r.jsx)("td",{className:"px-3 py-2 border-b border-gray-200",children:(0,r.jsx)("input",{type:"text",name:l,value:e[l]||"",onChange:e=>{let r=[...a];r[t][l]=e.target.value,d(r)},onPaste:e=>b(e,t,l),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})},l))},t))})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{m.push("/dashboard/inquiries")},className:"px-5 py-2 bg-red-500 hover:bg-red-600 text-white rounded",children:"Close"}),(0,r.jsx)("button",{onClick:()=>{t(o),d([{...o}])},type:"button",className:"px-5 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded",children:"Clean"}),(0,r.jsx)("button",{onClick:x,className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Save"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3963)),_N_E=e.O()}]);