"use strict";exports.id=199,exports.ids=[199],exports.modules={36:(e,t,a)=>{a.d(t,{default:()=>o.a});var l=a(9587),o=a.n(l)},1968:(e,t)=>{function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return a}})},2199:(e,t,a)=>{a.d(t,{default:()=>y});var l=a(687),o=a(3210),r=a(3016);a(6966);var n=a(6189),i=a(1060),s=a(36),d=a(2164);let u=`${d.A}/inquiries`,c=(0,s.default)(async()=>{},{loadableGenerated:{modules:["components\\InquiryStatusPage.tsx -> ./ClientCSVLink"]},ssr:!1}),m=[{key:"inqDate",label:"INQ Date"},{key:"todayDate",label:"Today Date"},{key:"period",label:"Period"},{key:"sales",label:"Sales"},{key:"buyer",label:"Buyer"},{key:"stockId",label:"Stock ID"},{key:"shape",label:"Shape"},{key:"ct",label:"CT"},{key:"color",label:"Color"},{key:"clarity",label:"Clarity"},{key:"cut",label:"Cut"},{key:"po",label:"PO"},{key:"sym",label:"Sym"},{key:"lab",label:"Lab"},{key:"report",label:"REPORT"},{key:"disPpc",label:"DIS/PPC"},{key:"ppc",label:"PPC"},{key:"amt",label:"AMT"},{key:"type",label:"Type"},{key:"availability",label:"Sale Team Status"},{key:"payment",label:"Payment"},{key:"remark",label:"Remark"},{key:"location",label:"Location"},{key:"otRemark",label:"Backend Status"},{key:"time",label:"Time"},{key:"statusOfStone",label:"Status of Stone"},{key:"qcRemark",label:"QC Remark"},{key:"stoneConfirmationRemark",label:"Stone Confirmation Remark"},{key:"entryStatus",label:"Entry Status"},{key:"locationRemark",label:"Location Remark"}];function y({title:e,statuses:t,showInvoiceColumn:a=!1}){let[s,y]=(0,o.useState)([]),[p,b]=(0,o.useState)([]),[k,f]=(0,o.useState)(""),[h,_]=(0,o.useState)(""),[x,g]=(0,o.useState)(""),[v,S]=(0,o.useState)(""),[j,C]=(0,o.useState)(null);(0,n.useRouter)();let[R,w]=(0,o.useState)(""),[P,O]=(0,o.useState)([]),D=async(e,t)=>{let a=localStorage.getItem("token"),l={...t,sale_team_status:t.availability,backend_status:t.otRemark,dis_ppc:t.disPpc,remark_request:t.remark,stock_id:t.stockId,status_of_stone:t.statusOfStone,qc_remark:t.qcRemark,stone_confirmation_remark:t.stoneConfirmationRemark,entry_status:t.entryStatus,location_remark:t.locationRemark};try{let t=await fetch(`${u}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(l)}),o=await t.json(),r=s.map(t=>t.id===e?{...t,...o,inqDate:o.inquiry_date,todayDate:o.today_date,stockId:o.stock_id,disPpc:o.dis_ppc,availability:o.sale_team_status,remark:o.remark_request,otRemark:o.backend_status,statusOfStone:o.status_of_stone,qcRemark:o.qc_remark,stoneConfirmationRemark:o.stone_confirmation_remark,entryStatus:o.entry_status,locationRemark:o.location_remark}:t);y(r),b(r)}catch(e){console.error("Edit failed:",e)}},I=async(e,t,a)=>{let l=localStorage.getItem("token")||"";localStorage.getItem("role"),localStorage.getItem("userName");try{let o=(await i.A.patch(`${u}/${e}`,{[({disPpc:"dis_ppc",availability:"sale_team_status",otRemark:"backend_status",remark:"remark_request",stockId:"stock_id",statusOfStone:"status_of_stone",qcRemark:"qc_remark",stoneConfirmationRemark:"stone_confirmation_remark",entryStatus:"entry_status",locationRemark:"location_remark"})[t]||t]:a},{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}})).data,r=s.map(t=>t.id===e?{...t,...o,inqDate:o.inquiry_date,todayDate:o.today_date,stockId:o.stock_id,disPpc:o.dis_ppc,availability:o.sale_team_status,remark:o.remark_request,otRemark:o.backend_status,statusOfStone:o.status_of_stone,qcRemark:o.qc_remark,stoneConfirmationRemark:o.stone_confirmation_remark,entryStatus:o.entry_status,locationRemark:o.location_remark}:t);y(r),b(r)}catch(e){console.error("Auto-save failed:",e)}},q=async e=>{console.log("\uD83D\uDDD1 Deleting inquiry:",e);try{let t=localStorage.getItem("token"),a=await fetch(`${d.A}/inquiries/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!a.ok){let e=await a.text();throw Error(e||"Delete failed")}y(t=>t.filter(t=>t.id!==e)),b(t=>t.filter(t=>t.id!==e)),console.log("\uD83D\uDDD1 Deleting inquiry with ID:",e)}catch(e){console.error("❌ Failed to delete inquiry",e),alert("Something went wrong while deleting.")}};return(0,l.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md h-[1000px]",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:e}),(0,l.jsx)("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:(0,l.jsxs)("form",{className:"flex flex-wrap gap-4 items-end mb-6",onSubmit:e=>{e.preventDefault();let t=v?new Date(v):null;b(s.filter(e=>{let a=new Date(e.inqDate);return(!k||String(e.id).toLowerCase().includes(k.toLowerCase()))&&(!h||e.report&&e.report.toLowerCase().includes(h.toLowerCase()))&&(!x||e.availability&&e.availability.toLowerCase()===x.toLowerCase())&&(!t||a>=t)}))},children:[(0,l.jsx)("input",{type:"text",placeholder:"Inquiry No",className:"border border-gray-600 rounded px-2 py-1 text-sm min-w-[140px]",value:k,onChange:e=>f(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Report No",className:"border border-gray-600 rounded px-2 py-1 text-sm min-w-[140px]",value:h,onChange:e=>_(e.target.value)}),(0,l.jsxs)("select",{className:"border border-gray-600 rounded px-2 py-1 text-sm min-w-[180px]",value:x,onChange:e=>g(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Sale Team Status"}),(0,l.jsx)("option",{value:"Available",children:"Available"}),(0,l.jsx)("option",{value:"Not Available",children:"Not Available"}),(0,l.jsx)("option",{value:"Hold",children:"Hold"}),(0,l.jsx)("option",{value:"On Memo",children:"On Memo"}),(0,l.jsx)("option",{value:"Confirmed - TOH",children:"Confirmed - TOH"}),(0,l.jsx)("option",{value:"Hold - TOH",children:"Hold - TOH"}),(0,l.jsx)("option",{value:"Release",children:"Release"}),(0,l.jsx)("option",{value:"ADDED TO STOCK",children:"ADDED TO STOCK"}),(0,l.jsx)("option",{value:"IN EXHIBITION",children:"IN EXHIBITION"}),(0,l.jsx)("option",{value:"Pending",children:"Pending"})]}),(0,l.jsx)("input",{type:"date",className:"border border-gray-600 rounded px-2 py-1 text-sm min-w-[180px]",value:v,onChange:e=>S(e.target.value)}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition text-sm",children:"Search"}),(0,l.jsx)("button",{type:"button",onClick:()=>{f(""),_(""),g(""),S(""),b(s)},className:"bg-red-400 text-white px-4 py-2 rounded hover:bg-red-500 transition text-sm",children:"Reset"}),"Dispatched"===e&&(0,l.jsx)(c,{data:p.filter(e=>P.includes(e.id)),headers:m.map(e=>({label:e.label,key:e.key})),filename:"inquiries.csv",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm",children:"Download Data"})]})}),(0,l.jsx)(r.A,{data:p,columns:m,role:j||"",onEdit:D,onDelete:q,onCheckboxChange:I,defaultAvailability:t[0],selectedRows:P,rowCheckbox:"Dispatched"===e,onRowCheckbox:(e,t)=>{O(a=>t?[...a,e]:a.filter(t=>t!==e))},onSelectAllRows:e=>{e?O(p.map(e=>e.id)):O([])},showInvoiceColumn:a})]})}},4777:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let l=a(687),o=a(1215),r=a(9294),n=a(1968);function i(e){let{moduleIds:t}=e,a=r.workAsyncStorage.getStore();if(void 0===a)return null;let i=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;i.push(...t)}}return 0===i.length?null:(0,l.jsx)(l.Fragment,{children:i.map(e=>{let t=a.assetPrefix+"/_next/"+(0,n.encodeURIPath)(e);return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,o.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},4963:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let l=a(687),o=a(3210),r=a(6780),n=a(4777);function i(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...s,...e},a=(0,o.lazy)(()=>t.loader().then(i)),d=t.loading;function u(e){let i=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,u=s?o.Suspense:o.Fragment,c=t.ssr?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.PreloadChunks,{moduleIds:t.modules}),(0,l.jsx)(a,{...e})]}):(0,l.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(u,{...s?{fallback:i}:{},children:c})}return u.displayName="LoadableComponent",u}},6780:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let l=a(1208);function o(e){let{reason:t,children:a}=e;throw Object.defineProperty(new l.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},9587:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let l=a(4985)._(a(4963));function o(e,t){var a;let o={};"function"==typeof e&&(o.loader=e);let r={...o,...t};return(0,l.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};